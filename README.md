# 2024년 1학기 스마트폰 게임 프로그래밍 프로젝트

## Space Clicker

## 1. 게임 컨셉

_**장르**_: 방치형, 클리커, 업적 수집

_**핵심 메카닉**_: 클릭을 통해 자원을 획득하고, 업그레이드를 통해 자원 획득량을 증가시키는 방치형 게임

_**컨셉**_: 우주선을 타고 클릭을 통해 스크랩을 수집해 우주선을 업그레이드하고 점점 더 멀리 나아가는 방치형 게임

![clickerGame](.md_res/clickerGameExample.png "Cookie Clicker")
_클리커 게임 대표 예시 - [Cookie Clicker]_

![assetExample](.md_res/assetExample.png "Asset Example")
_게임에서 사용할 에셋 예시_

---

## 2. 개발 범위

### 메인 게임

-   자동으로 화면이 스크롤 되면서 우주선이 전진(무한 스크롤)
-   클릭을 통해 스크랩을 수집
-   화면에 현재 자원이나 속도 표시 및 업그레이드 페이지로 이동 가능한 UI
-   업그레이드된 요소 화면에 표시
    -   e.g. 안테나 업그레이드 시 우주선에 안테나가 추가됨
-   랜덤 이벤트(미니게임) 2종
    -   소행성 지대 통과: 날아오는 소행성을 피해 우주선을 조종해 통과
    -   적과 전투: 간단한 탄막 슈팅 게임을 진행

### 업그레이드

-   스크랩을 통해 업그레이드 할 수 있는 3개의 항목
-   기지로 복귀를 통해 이동거리에 따른 업적 획득 및 초기화, 영구 업그레이드 획득
    -   우주선 변경

#### 업그레이드 종류

-   _스크랩 획득량 업그레이드_

    1. 안테나
        - 클릭 시 획득되는 스크랩량(CS)을 증가시킵니다.
        - 최초 가격: 15 S(스크랩)
        - 효과: CS +0.5
    2. 로봇 팔
        - 자동으로 획득되는 스크랩(SPS, ScrapPerSec)을 증가시킵니다.
        - 최초 가격: 50 S
        - 효과: SPS +0.5
    3. 재활용 기계
        - SPS를 증가시킵니다.
        - 최초 가격: 100 S
        - 효과: SPS +0.5

-   _우주선 속도 업그레이드_
    1. 엔지니어 고용
        - 최초 가격: 100 S
        - 효과: +0.1km/s
    2. 엔진 업그레이드
        - 최초 가격: 1,000 S
        - 효과: +0.5km/s
    3. 유선형 설계
        - 최초 가격: 10,000 S
        - 효과: +1km/s

### 업적

-   이동 거리나, 속도, 자원 수집량에 따른 업적 20종
-   업적을 모아서 볼 수 있는 페이지

#### 업적 종류

1. 안테나를 최초로 구매합니다.
2. 로봇 팔을 최초로 구매합니다.
3. 재활용 기계를 최초로 구매합니다.
4. 엔지니어를 최초로 고용합니다.
5. 엔진을 최초로 구매합니다.
6. 유선형 설계를 최초로 구매합니다.
7. 7,777,777개의 스크랩을 획득합니다.
8. 1AU(1억 5천만 km) 거리를 이동합니다.
9. 30AU(45억 km) 거리를 이동합니다.(해왕성)
10. 202억 km 거리를 이동합니다.(보이저 2호)
11. 242억 km 거리를 이동합니다.(보이저 1호)
12. 우주 해적을 격파합니다.
13. 소행성 지대를 통과합니다.
14. 소행성과 충돌합니다.
15. 11.2km/s 에 도달합니다.(탈출속도)
16. 1000SPS에 도달합니다.
17. 100km/s 에 도달합니다.
18. 기지로 복귀합니다.
19. 화면을 10,000번 터치합니다.
20. 게임이 꺼진 상태에서 1,000,000 km 거리를 이동합니다.

### 백그라운드 동작

-   게임 종료 후에도 업그레이드 상황에 따라 자동으로 자원 수집 및 우주선 전진
    -   게임 종료 시간을 저장하고 다시 시작할 때 이를 기준으로 자원 수집량 계산
    -   이동거리도 마찬가지로 계산
-   랜덤 이벤트나 업적 달성, 자원 수집량에 도달 시 알림

---

## 3. 게임 실행 흐름

![gameFlow](.md_res/gamePlayScreen.png "Game Flow")

-   클릭을 통해 우주의 스크랩을 수집한다.
-   수집한 스크랩으로 우주선을 업그레이드한다.
-   업그레이드를 통해 우주선의 속도와 자원 자동 수집량을 증가시킨다.
-   게임을 초기화(지구로 복귀)하는 대신 영구적인 업그레이드(우주선 변경 등)와 업적을 주는 이벤트를 추가한다.
-   게임을 종료해도 백그라운드에서 업그레이드 상황에 따라 게임이 진행된다.
-   자원 수집이나 우주선 속도, 이동거리 또는 임의의 이벤트에 따라 업적을 달성할 수 있다.

---

## 4. 개발 일정

### git insights

![gitInsights](.md_res/git_insights_commit.png "Git Insights")
| 0주차 | 1주차 | 2주차 | 3주차 | 4주차 | 5주차 |
| :---: | :---: | :---: | :---: | :---: | :---: |
| 4 | 12 | 3 | 18 | 3 | 7 |

| 6주차 | 7주차 | 8주차 | 9주차 | 10주차 |
| :---: | :---: | :---: | :---: | :----: |
|   2   |   2   |   4   |  11   |   11   |

_0주차 프로젝트 생성 및 발표 준비_

### 변경된 계획

미니게임 1종의 내용이 변경되었다.
기존에 슈팅 게임에서, 터치 액션으로 변경하였다.
슈팅 게임의 경우 수업에서 그대로 다룬 'Dragon Flight'가 있었기 때문에, 조금이라도 다른 내용을 구현해보고 싶었다.
그래서 버튼 액션 게임에서 자주 빠르게 터치하여 게이지를 채우는-마치 줄다리기를 하는 것처럼-게임으로 변경하였다.

### 1주차 (100%)

-   메인 화면 구성
    -   화면에 우주선 이미지를 배치하고, 클릭 시 스크랩을 획득하는 기능 구현
    -   화면에 스크랩 수량을 표시하는 UI 구현
    -   자동으로 스크랩을 수집하는 기능 구현

### 2주차 (100%)

-   우주선이 자동으로 전진하는 것처럼 보이는 화면 구성
    -   화면 스크롤 기능 구현
    -   중간에 임의로 스크랩 이미지나 행성 이미지가 지나가도록 배치
-   우주선 이동 속도와 이동 거리를 표시하는 UI 구현

### 3주차 (75%)

-   업그레이드 및 업적 확인 버튼 구현
-   _업그레이드 및 업적 화면 구현_ (50%, 업적 화면 미구현)
-   _업그레이드 팝업화면 구현_ (Toast로만 구현, 팝업 클래스 구현 예정)
-   자원 수집 업그레이드 시 자동으로 자원 수집량 증가하는 것 구현

### 4주차 (90%)

-   업적 구현
    -   _업적을 달성하면 업적 화면에 팝업으로 표시하는 기능 구현_ (Toast로만 구현, 팝업 클래스 구현 예정)
    -   게임 내 어떤 수치가 일정 수준에 도달할 때마다 업적 달성

### 5주차 (100%)

-   랜덤 이벤트(미니게임) 기반 구현
    -   이벤트 발생 조건 설정
    -   이벤트 발생 시 화면 전환 구현
-   랜덤 이벤트(미니게임) 1종 구현

### 6주차 (100%)

-   랜덤 이벤트(미니게임) 나머지 1종 구현

### 7주차 (80%)

-   저장, 불러오기 기능 구현
-   백그라운드 동작 구현
    -   저장된 게임 데이터를 기반
    -   게임 종료 후에도 자동으로 자원 수집 및 우주선 전진해 불러올 때 반영

### 8주차 (100%)

-   백그라운드 동작 구현2
    -   게임을 종료한 사이 랜덤 이벤트가 발생하면 알림
    -   일정 수치만큼 자원을 수집하거나 플레이어가 설정한 수집량에 도달하면 알림

### 9주차

-   최종 데모 제작
-   _여유일정_
    - _혹여나 중간에 일정이 밀린 경우를 대비_ 

---

## 5. 사용된 기술

### 사용한 기술

- SharedPreferences를 이용한 데이터 저장 및 불러오기
- 안드로이드 알림 기능(BroadcastReceiver, NotificationManager)
- Singleton 패턴
- listView를 이용한 업적 목록 구현 / 업적 달성에 따른 리스트 색상 변경

### 수업내용에서 차용한 것

- 씬(Scene)을 통한 화면 구성 및 전환
- ListView에 어댑터를 이용한 데이터 연결
- 인터페이스들
- 사운드 시스템

### 직접 개발한 것

- SharedPreferences를 이용한 데이터 저장 및 불러오기
- 원과 원, 원과 사각형의 충돌 판정
- BroadcastReceiver를 이용한 시간 지정 알림

---

## 6. 아쉬운 것

### 1. Json 파일을 이용한 데이터 저장 및 불러오기

하나의 숫자만 저장하면 되는 데이터들은 SharedPreferences를 이용해 저장했다.
하지만, 여러 데이터가 하나의 객체로 묶여 있는 경우 다른 방식이 필요했다.
이 때, Json 파일을 이용해 데이터를 저장하고 불러오는 방식을 사용했다.
수업 시간에 이용한 방식을 통해 데이터를 불러오는 것은 성공했지만, 데이터 저장이 제대로 되지 않았다.
JsonWriter를 이용해보았는데 조금 더 공부가 필요할 것 같다.

### 2. 더 많은 미니게임과 업그레이드, 업적

게임을 판매하기 위해서는 더 많은 콘텐츠가 필요하다고 생각한다.
특히 업그레이드와 업적은 게임의 플레이 욕구를 높이는데 중요한 요소라고 생각한다.

### 3. 업적 시스템

프로젝트를 진행하면서 업적 시스템을 구현하는 것이 어려웠다.
특히 업적 확인을 언제, 어디서, 어떻게 할지에 대한 고민이 많았다.
특정 행동을 했을 때 확인되는 업적은 그 즉시 업적을 확인해 갱신해주었지만,
스크랩이 일정량 이상이 되는 등 조건 업적은 어떻게 확인해야 할지 선뜻 떠오르지 않았다.

---

## 7. 수업에 대한 소감

- 수업 내용 전반이 실제 게임을 개발할 때 필요한 기술/내용들이 많아 매우 유익했다.
- 게임 프레임워크를 이용한 개발을 Java라는 새로운 언어로 해보면서, 다른 언어, 환경 프로젝트에 적용하고 있던 것들 중에 개선할 점이나 잘하고 있는 점을 발견할 수 있어 좋았다.
- 아쉬운 점은 수업 초반과 다르게 이미 커밋된 코드를 보고 설명해주시는 부분이 조금 집중하기 힘들었다.
시간이 부족해서 생긴 문제이지만 약간은 아쉬웠다.
